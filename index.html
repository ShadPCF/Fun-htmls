<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>Knock Knock</title>

<style>
:root{
  --bg1:#120818;
  --bg2:#2a0f3b;
  --pink:#ff4d88;
  --gold:#ffcc66;
  --w:rgba(255,255,255,.92);
  --w2:rgba(255,255,255,.72);
  --stroke:rgba(255,255,255,.18);
}

*{box-sizing:border-box}
html,body{height:100%}

body{
  margin:0;
  display:flex;
  align-items:center;
  justify-content:center;
  color:var(--w);
  font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;
  overflow:hidden;
  background:
    radial-gradient(900px 600px at 20% 10%, rgba(255,77,136,.28), transparent 60%),
    radial-gradient(800px 520px at 90% 30%, rgba(255,204,102,.18), transparent 62%),
    linear-gradient(160deg, var(--bg1), var(--bg2));
}

.shell{
  width:92%;
  max-width:460px;
  border-radius:28px;
  padding:18px;
  border:1px solid var(--stroke);
  background: linear-gradient(180deg, rgba(255,255,255,.14), rgba(255,255,255,.06));
  box-shadow: 0 26px 90px rgba(0,0,0,.62);
}

.topbar{
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:12px;
  padding:2px 4px 10px 4px;
}

.h1{
  margin:0;
  font-weight:950;
  letter-spacing:.2px;
  font-size:18px;
}

.h2{
  margin:0;
  color:var(--w2);
  font-size:12px;
}

.stepPill{
  padding:8px 12px;
  border-radius:999px;
  border:1px solid rgba(255,255,255,.18);
  background: rgba(0,0,0,.18);
  color:rgba(255,255,255,.82);
  font-size:12px;
  font-weight:800;
}

.stage{
  min-height:420px;
  display:flex;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  gap:14px;
  padding:8px 8px 0 8px;
}

.sceneCard{
  width:min(380px, 96%);
  border-radius:26px;
  border:1px solid rgba(255,255,255,.16);
  background: linear-gradient(180deg, rgba(0,0,0,.18), rgba(0,0,0,.08));
  box-shadow: 0 18px 60px rgba(0,0,0,.42);
  padding:14px;
}

.doorFrame{
  position:relative;
  width:100%;
  aspect-ratio: 4 / 3;
  border-radius:20px;
  overflow:hidden;
  border:1px solid rgba(255,255,255,.18);
  background:#000;
}

.doorImg{
  position:absolute;
  inset:0;
  width:100%;
  height:100%;
  object-fit:cover;
  transform:scale(1.02);
  filter:saturate(1.05) contrast(1.03);
}

.vignette{
  position:absolute;
  inset:0;
  background:
    radial-gradient(70% 70% at 50% 35%, rgba(255,255,255,.10), transparent 60%),
    radial-gradient(120% 100% at 50% 100%, rgba(0,0,0,.45), transparent 55%);
  pointer-events:none;
}

.knockOverlay{
  position:absolute;
  left:10%;
  top:6%;
  width:48%;
  max-width:220px;
  transform-origin: 30% 60%;
  filter: drop-shadow(0 16px 20px rgba(0,0,0,.45));
}

.knockWiggle{
  animation: wiggle 1.15s ease-in-out infinite;
}

@keyframes wiggle{
  0%{ transform: translate(0,0) rotate(-2deg) scale(1) }
  20%{ transform: translate(2px,-1px) rotate(2deg) scale(1.01) }
  40%{ transform: translate(-2px,1px) rotate(-1deg) scale(1.00) }
  60%{ transform: translate(2px,1px) rotate(2deg) scale(1.01) }
  80%{ transform: translate(-1px,-1px) rotate(-2deg) scale(1.00) }
  100%{ transform: translate(0,0) rotate(-2deg) scale(1) }
}

.flash{
  animation: flash 380ms ease-out both;
}

@keyframes flash{
  0%{ opacity: .0 }
  25%{ opacity: .9 }
  100%{ opacity: .0 }
}

.metaRow{
  display:flex;
  gap:10px;
  justify-content:center;
  padding-top:10px;
  color:var(--w2);
  font-size:12px;
  font-weight:700;
}

.actions{
  display:flex;
  gap:10px;
  margin-top:14px;
  padding:0 4px;
}

.btn{
  width:100%;
  padding:14px 16px;
  border:none;
  border-radius:18px;
  font-weight:950;
  font-size:15px;
  color:#250517;
  background: linear-gradient(135deg, var(--pink), var(--gold));
  box-shadow: 0 14px 30px rgba(255,77,136,.18);
  -webkit-tap-highlight-color:transparent;
}

.small{
  margin:10px 0 0 0;
  text-align:center;
  color:var(--w2);
  font-size:12px;
}
</style>
</head>

<body>
<div class="shell">
  <div class="topbar">
    <div>
      <p class="h1">Knock knock</p>
      <p class="h2">tap through the tiny story</p>
    </div>
    <div class="stepPill" id="stepPill">Step 1</div>
  </div>

  <div class="stage" id="stage"></div>

  <div class="actions">
    <button class="btn" id="btn"></button>
  </div>

  <p class="small" id="hint">sound needs one tap on iPhone</p>
</div>

<script>
const stage = document.getElementById("stage")
const btn = document.getElementById("btn")
const stepPill = document.getElementById("stepPill")
const hint = document.getElementById("hint")

let step = 1

render()

btn.addEventListener("click", () => {
  if (step === 1) {
    const k = document.getElementById("knock")
    const f = document.getElementById("flash")
    if (k) {
      k.classList.remove("knockWiggle")
      void k.offsetWidth
      k.classList.add("knockWiggle")
    }
    if (f) {
      f.classList.remove("flash")
      void f.offsetWidth
      f.classList.add("flash")
    }
    setTimeout(() => { step = 2; render() }, 260)
    return
  }

  if (step === 2) {
    step = 3
    render()
    return
  }

  if (step === 3) {
    step = 4
    render()
    return
  }

  step = 1
  render()
})

function render(){
  stepPill.textContent = "Step " + step

  if (step === 1) {
    stage.innerHTML = `
      <div class="sceneCard">
        <div class="doorFrame">
          <img class="doorImg" src="door.jpg" alt="door">
          <div class="vignette"></div>

          <img class="knockOverlay knockWiggle" id="knock" src="knock.png" alt="knock knock">
          <div class="vignette flash" id="flash"></div>
        </div>

        <div class="metaRow">
          <div>tap to answer</div>
          <div>knock wiggles</div>
        </div>
      </div>
    `
    btn.textContent = "Who‚Äôs there"
    hint.textContent = "if image not showing, check file names door.jpg and knock.png"
    return
  }

  if (step === 2) {
    stage.innerHTML = `
      <div class="sceneCard">
        <div class="metaRow" style="padding:0 0 10px 0">
          <div style="font-weight:950;color:rgba(255,255,255,.90)">Who‚Äôs there</div>
        </div>
        <div class="doorFrame">
          <img class="doorImg" src="door.jpg" alt="door">
          <div class="vignette"></div>
        </div>
        <div class="metaRow">
          <div>next name</div>
        </div>
      </div>
    `
    btn.textContent = "Valen"
    hint.textContent = "tap to continue"
    return
  }

  if (step === 3) {
    stage.innerHTML = `
      <div class="sceneCard">
        <div class="metaRow" style="padding:0 0 10px 0">
          <div style="font-weight:950;color:rgba(255,255,255,.90)">Valen</div>
        </div>
        <div class="doorFrame">
          <img class="doorImg" src="door.jpg" alt="door">
          <div class="vignette"></div>
        </div>
        <div class="metaRow">
          <div>final line</div>
        </div>
      </div>
    `
    btn.textContent = "Valen who"
    hint.textContent = "tap for reveal"
    return
  }

  stage.innerHTML = `
    <div class="sceneCard" style="text-align:center">
      <div style="font-size:54px;margin:6px 0 2px 0">üíê</div>
      <div style="font-weight:950;font-size:22px;letter-spacing:.2px">Happy Valentine‚Äôs Day</div>
      <div style="color:rgba(255,255,255,.78);margin-top:8px;font-size:14px;line-height:1.45">
        sending you love and good vibes
      </div>
    </div>
  `
  btn.textContent = "Replay"
  hint.textContent = "share the link when ready"
}
</script>
</body>
</html>
